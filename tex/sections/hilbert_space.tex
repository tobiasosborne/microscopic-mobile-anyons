% hilbert_space.tex
% LaTeX counterpart of docs/hilbert_space.md
% Section ยง4.2

\section{Hilbert Space for Mobile Anyons}\label{sec:hilbert-space}

%=============================================================
\subsection{Notation: Disambiguation of Symbol $N$}\label{subsec:notation-N}
%=============================================================

\begin{convention}[Disambiguation of $N$]\label{conv:N-disambiguation}
The symbol $N$ is overloaded in this section with three distinct meanings. Context distinguishes them:

\begin{center}
\begin{tabular}{lll}
\toprule
\textbf{Context} & \textbf{Meaning} & \textbf{Example} \\
\midrule
Subscript: $\catH_N$, $\catH_N^{(c)}$ & Particle number sector & $\catH_3$ = sector with 3 anyons \\
Superscript: $N_{ab}^c$ & Fusion multiplicity & $N_{12}^0 \in \{0,1\}$ in Fibonacci \\
Variable: $N \in \{1, \ldots, n\}$ & Particle number (variable) & $\bigoplus_{N=0}^{n}$ \\
\bottomrule
\end{tabular}
\end{center}

All three use the same letter but are syntactically distinct. Avoid using plain $N$ alone; always include subscript/superscript or context.
\end{convention}

%=============================================================

\begin{assumption}\label{ass:hilbert-space}
\begin{enumerate}[label=(A4.2.\arabic*)]
    \item Fusion category $\mathcal{C}$ with unit $\one$ and simples $X_0=\one, X_1, \ldots, X_{d-1}$.
    \item $n$ lattice sites, OBC.
\end{enumerate}
\end{assumption}

\subsection{Morphism Spaces}\label{subsec:mor-spaces-hilbert}

\begin{definition}[Morphism space]\label{def:mor-space-hilbert}
For objects $A, B \in \mathcal{C}$:
\begin{equation}
    \Mor(A, B) = \Hom_{\mathcal{C}}(A, B)
\end{equation}
This is a finite-dimensional complex vector space with $\dim \Mor(A,B) = \delta_{A,B}$ for simple $A, B$ (in the multiplicity-free case).
\end{definition}

\begin{remark}
With multiplicity: $\dim \Mor(X_a \otimes X_b, X_c) = N_{ab}^c$.
\end{remark}

\subsection{$N$-Anyon Sector with Definite Charge}\label{subsec:definite-charge}

\begin{definition}[Site occupation]\label{def:site-occupation}
For a labelled configuration $(\mathbf{x}, \mathbf{k})$ on $n$ sites, define the \emph{site label} $s_j \in \{0, 1, \ldots, d-1\}$ for each site $j \in \{0, \ldots, n-1\}$:
\begin{equation}
    s_j = \begin{cases} k_i & \text{if } x_i = j \text{ for some } i \in \{1, \ldots, N\} \\ 0 & \text{otherwise (site unoccupied, i.e., vacuum } \mathbf{1}) \end{cases}
\end{equation}
\end{definition}

\begin{definition}[Object for configuration]\label{def:object-config}
The \emph{tensor product object} for a labelled configuration $(\mathbf{x}, \mathbf{k})$ is:
\begin{equation}
    \mathcal{O}(\mathbf{x}, \mathbf{k}) = X_{s_0} \otimes X_{s_1} \otimes \cdots \otimes X_{s_{n-1}}
\end{equation}
This is a tensor product over all $n$ sites, with $X_0 = \mathbf{1}$ (vacuum) at unoccupied sites.
\end{definition}

\begin{definition}[$N$-anyon space, definite charge]\label{def:n-anyon-definite}
The space of $N$ anyons with total charge $c$:
\begin{equation}
    \mathcal{H}_N^{(c)} = \bigoplus_{(\mathbf{x},\mathbf{k}) \in \mathrm{Conf}_N} \Mor(X_c, \mathcal{O}(\mathbf{x},\mathbf{k}))
\end{equation}
\end{definition}

\begin{remark}
A state $|\psi\rangle \in \mathcal{H}_N^{(c)}$ is a superposition over configurations, with amplitudes in the appropriate morphism spaces. The morphism $\Mor(X_c, \mathcal{O}(\mathbf{x},\mathbf{k}))$ describes how anyons at the specified positions fuse to total charge $X_c$.
\end{remark}

\subsection{$N$-Anyon Sector with Indefinite Charge}\label{subsec:indefinite-charge}

\begin{definition}[$N$-anyon space, indefinite charge]\label{def:n-anyon-indefinite}
\begin{equation}
    \mathcal{H}_N = \bigoplus_{c=0}^{d-1} \mathcal{H}_N^{(c)}
\end{equation}
\end{definition}

\begin{remark}
Direct sum = ``OR quantifier'': the system has charge $X_0$ OR charge $X_1$ OR \ldots
\end{remark}

\subsection{Total Hilbert Space}\label{subsec:total-hilbert}

\begin{definition}[Total Hilbert space]\label{def:total-hilbert}
\begin{equation}
    \mathcal{H} = \bigoplus_{N=0}^{n} \mathcal{H}_N
\end{equation}
where $\mathcal{H}_0 = \mathbb{C}$ (vacuum sector).
\end{definition}

\begin{remark}
Direct sum over $N$ = ``OR quantifier'' for particle number. This is the first-quantised Fock space structure (cf.\ \S\ref{sec:fock-space}).
\end{remark}

\subsection{Fusion Trees}\label{subsec:fusion-trees}

\begin{definition}[Fusion tree]\label{def:fusion-tree}
A \emph{fusion tree} $\tau$ for a configuration $(\mathbf{x}, \mathbf{k})$ with $N$ anyons is a labelling of internal nodes in a \textbf{binary tree} that encodes how the anyons fuse step-by-step to produce a final total charge. Formally:
\begin{enumerate}
    \item \textbf{Leaves:} The $N$ anyons occupy the leaves, labelled with their types $X_{k_1}, \ldots, X_{k_N}$.
    \item \textbf{Internal nodes:} Each internal node is labelled with an intermediate fusion result $X_e$ (some simple object of $\catC$).
    \item \textbf{Binary structure:} Each internal node has exactly two children (left and right), and the label at that node represents the fusion result: left child $\otimes$ right child.
    \item \textbf{Root:} The root node is labelled with the final total charge $X_c$.
\end{enumerate}
\end{definition}

\begin{remark}
The fusion tree is not unique (not canonical) due to associativity of tensor products: different parenthesisations yield different tree structures, all yielding the same tensor product result. For multiplicity-free categories ($N_{ab}^c \in \{0,1\}$), all choices span the same morphism space $\Mor(X_c, \catO(\mathbf{x},\mathbf{k}))$, but individual basis vectors depend on the choice.
\end{remark}

\begin{claim}\label{claim:fusion-tree-orthogonal}
Different fusion trees $\tau \neq \tau'$ for the same configuration and charge are orthogonal basis vectors. The transition amplitudes between different tree bases are determined by the F-symbols of the category.
\end{claim}

\subsection{Explicit Construction}\label{subsec:explicit-construction}

For hard-core anyons, a basis of $\mathcal{H}_N^{(c)}$ is indexed by:
\begin{enumerate}
    \item Configuration $(\mathbf{x}, \mathbf{k}) \in \mathrm{Conf}_N^{\mathrm{HC}}$
    \item Fusion tree $\tau$ from $\mathcal{O}(\mathbf{x}, \mathbf{k})$ to $X_c$
    \item Multiplicity indices (if $N_{ab}^c > 1$)
\end{enumerate}

\begin{claim}\label{claim:hilbert-dim}
For multiplicity-free categories:
\begin{equation}
    \dim \mathcal{H}_N^{(c)} = \sum_{(\mathbf{x},\mathbf{k})} \dim \Mor(X_c, \mathcal{O}(\mathbf{x},\mathbf{k}))
\end{equation}
\end{claim}
